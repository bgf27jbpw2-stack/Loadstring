-- Made by 3kuzbleed
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")
local CoreGui = game:GetService("CoreGui")
local VirtualUser = game:GetService("VirtualUser")
local UserInputService = game:GetService("UserInputService")
local SoundService = game:GetService("SoundService")
local Lighting = game:GetService("Lighting")
local TweenService = game:GetService("TweenService")

-- Configuration
local Settings = {
    KillAura = true,
    Reach = 10,
    AutoSwing = true,
    Visualizer = false,
    TeamCheck = true,
    LowGFX = false,
    FullBright = false,
    RGB = true
}

-- Visualizer System
local VisualizerPart = Instance.new("Part")
VisualizerPart.Name = "ReachVisualizer"
VisualizerPart.Shape = Enum.PartType.Ball
VisualizerPart.Material = Enum.Material.ForceField
VisualizerPart.Color = Color3.fromRGB(255, 0, 0)
VisualizerPart.Transparency = 0.5
VisualizerPart.CanCollide = false
VisualizerPart.Anchored = true
VisualizerPart.Parent = nil

-- Sound System
local function playSound(id)
    local s = Instance.new("Sound")
    s.SoundId = "rbxassetid://" .. tostring(id)
    s.Volume = 1
    s.Parent = SoundService
    s:Play()
    s.Ended:Connect(function() s:Destroy() end)
end

-- GUI Creation
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "3kuzbleedV16"
ScreenGui.Parent = CoreGui
ScreenGui.ResetOnSpawn = false

local MainFrame = Instance.new("Frame")
MainFrame.Name = "Main"
MainFrame.Size = UDim2.new(0, 500, 0, 500)
MainFrame.Position = UDim2.new(0.5, -250, 0.5, -250)
MainFrame.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
MainFrame.BorderSizePixel = 0
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Parent = ScreenGui

local BackgroundImage = Instance.new("ImageLabel")
BackgroundImage.Name = "Background"
BackgroundImage.Size = UDim2.new(1, 0, 1, 0)
BackgroundImage.Image = "rbxassetid://1767753685265"
BackgroundImage.ScaleType = Enum.ScaleType.Crop
BackgroundImage.ImageTransparency = 0.85
BackgroundImage.BackgroundTransparency = 1
BackgroundImage.Parent = MainFrame

local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 15)
UICorner.Parent = MainFrame

local UIStroke = Instance.new("UIStroke")
UIStroke.Thickness = 3
UIStroke.Color = Color3.fromRGB(255, 0, 0)
UIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
UIStroke.Parent = MainFrame

local TopBar = Instance.new("Frame")
TopBar.Name = "TopBar"
TopBar.Size = UDim2.new(1, 0, 0, 45)
TopBar.BackgroundColor3 = Color3.fromRGB(5, 5, 5)
TopBar.BackgroundTransparency = 0.2
TopBar.BorderSizePixel = 0
TopBar.Parent = MainFrame

local TopBarCorner = Instance.new("UICorner")
TopBarCorner.CornerRadius = UDim.new(0, 15)
TopBarCorner.Parent = TopBar

local TitleLabel = Instance.new("TextLabel")
TitleLabel.Size = UDim2.new(1, -60, 1, 0)
TitleLabel.Position = UDim2.new(0, 60, 0, 0)
TitleLabel.Text = "3KUZ HUB - V16 ELITE"
TitleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TitleLabel.Font = Enum.Font.GothamBlack
TitleLabel.TextSize = 18
TitleLabel.TextXAlignment = Enum.TextXAlignment.Left
TitleLabel.BackgroundTransparency = 1
TitleLabel.Parent = TopBar

local Sidebar = Instance.new("Frame")
Sidebar.Name = "Sidebar"
Sidebar.Size = UDim2.new(0, 180, 1, -45)
Sidebar.Position = UDim2.new(0, -180, 0, 45)
Sidebar.BackgroundColor3 = Color3.fromRGB(7, 7, 7)
Sidebar.BackgroundTransparency = 0.1
Sidebar.BorderSizePixel = 0
Sidebar.Parent = MainFrame

local ContentFrame = Instance.new("ScrollingFrame")
ContentFrame.Name = "Content"
ContentFrame.Size = UDim2.new(1, -40, 1, -75)
ContentFrame.Position = UDim2.new(0, 20, 0, 60)
ContentFrame.BackgroundTransparency = 1
ContentFrame.ScrollBarThickness = 2
ContentFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
ContentFrame.Parent = MainFrame

local ContentList = Instance.new("UIListLayout")
ContentList.Padding = UDim.new(0, 10)
ContentList.SortOrder = Enum.SortOrder.LayoutOrder
ContentList.Parent = ContentFrame

ContentList:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
    ContentFrame.CanvasSize = UDim2.new(0, 0, 0, ContentList.AbsoluteContentSize.Y + 20)
end)

-- Sidebar Toggle System
local MenuToggle = Instance.new("TextButton")
MenuToggle.Name = "MenuToggle"
MenuToggle.Size = UDim2.new(0, 45, 0, 45)
MenuToggle.Position = UDim2.new(0, 5, 0, 0)
MenuToggle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
MenuToggle.BackgroundTransparency = 1
MenuToggle.Text = ">"
MenuToggle.TextColor3 = Color3.fromRGB(255, 255, 255)
MenuToggle.Font = Enum.Font.GothamBlack
MenuToggle.TextSize = 24
MenuToggle.Parent = TopBar

local sidebarOpen = false
MenuToggle.MouseButton1Click:Connect(function()
    sidebarOpen = not sidebarOpen
    playSound(12222242)
    
    local targetPos = sidebarOpen and UDim2.new(0, 0, 0, 45) or UDim2.new(0, -180, 0, 45)
    local contentTargetPos = sidebarOpen and UDim2.new(0, 195, 0, 60) or UDim2.new(0, 20, 0, 60)
    local contentTargetSize = sidebarOpen and UDim2.new(1, -210, 1, -75) or UDim2.new(1, -40, 1, -75)
    
    MenuToggle.Text = sidebarOpen and "<" or ">"
    
    TweenService:Create(Sidebar, TweenInfo.new(0.3, Enum.EasingStyle.Quart), {Position = targetPos}):Play()
    TweenService:Create(ContentFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quart), {Position = contentTargetPos, Size = contentTargetSize}):Play()
end)

local Pages = {}
local function createPage(name)
    local page = Instance.new("Frame")
    page.Name = name
    page.Size = UDim2.new(1, 0, 0, 0)
    page.BackgroundTransparency = 1
    page.Visible = false
    page.Parent = ContentFrame
    
    local list = Instance.new("UIListLayout", page)
    list.Padding = UDim.new(0, 10)
    list.SortOrder = Enum.SortOrder.LayoutOrder
    
    list:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        page.Size = UDim2.new(1, 0, 0, list.AbsoluteContentSize.Y)
    end)
    
    Pages[name] = page
    return page
end

local combatPage = createPage("Combat")
local settingsPage = createPage("Settings")

local function showPage(name)
    for _, p in pairs(Pages) do p.Visible = false end
    Pages[name].Visible = true
end

local function createTab(name, yPos)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, -30, 0, 50)
    btn.Position = UDim2.new(0, 15, 0, yPos)
    btn.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    btn.BackgroundTransparency = 0.4
    btn.Text = name:upper()
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.GothamBlack
    btn.TextSize = 14
    btn.Parent = Sidebar
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 10)
    
    btn.MouseButton1Click:Connect(function()
        playSound(12222242)
        showPage(name)
    end)
end

createTab("Combat", 25)
createTab("Settings", 85)
showPage("Combat")

local toggles = {}
local function createToggle(name, parent, default, order, callback)
    local container = Instance.new("Frame")
    container.Size = UDim2.new(1, 0, 0, 50)
    container.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    container.BackgroundTransparency = 0.3
    container.Parent = parent
    container.LayoutOrder = order
    Instance.new("UICorner", container).CornerRadius = UDim.new(0, 10)

    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(0.65, 0, 1, 0)
    title.Position = UDim2.new(0, 15, 0, 0)
    title.Text = name:upper()
    title.TextColor3 = Color3.fromRGB(255, 255, 255)
    title.Font = Enum.Font.GothamBlack
    title.TextSize = 13
    title.TextXAlignment = Enum.TextXAlignment.Left
    title.BackgroundTransparency = 1
    title.Parent = container

    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0.25, 0, 0, 30)
    btn.Position = UDim2.new(0.72, 0, 0.5, -15)
    btn.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    btn.BackgroundTransparency = 0.5
    btn.Text = default and "ON" or "OFF"
    btn.TextColor3 = default and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)
    btn.Font = Enum.Font.GothamBlack
    btn.TextSize = 11
    btn.Parent = container
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 6)

    local state = default
    btn.MouseButton1Click:Connect(function()
        state = not state
        btn.Text = state and "ON" or "OFF"
        btn.TextColor3 = state and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)
        playSound(12222242)
        callback(state)
    end)
    
    table.insert(toggles, {btn = container, toggle = btn})
end

-- Synchronized Rainbow Effect
RunService.RenderStepped:Connect(function()
    local t = tick()
    local rainbowColor = Color3.fromHSV((t * 0.3) % 1, 0.8, 1)
    
    if Settings.RGB then
        UIStroke.Color = rainbowColor
        TitleLabel.TextColor3 = rainbowColor
        MenuToggle.TextColor3 = rainbowColor
        for _, item in ipairs(toggles) do
            local stroke = item.btn:FindFirstChild("UIStroke") or Instance.new("UIStroke", item.btn)
            stroke.Color = rainbowColor
            stroke.Thickness = 1.5
            stroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
            stroke.Transparency = 0.3
        end
    else
        UIStroke.Color = Color3.fromRGB(255, 0, 0)
        TitleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
        MenuToggle.TextColor3 = Color3.fromRGB(255, 255, 255)
        for _, item in ipairs(toggles) do
            if item.btn:FindFirstChild("UIStroke") then item.btn.UIStroke:Destroy() end
        end
    end
end)

-- Combat Tab (Up to Down)
createToggle("Kill Aura", combatPage, Settings.KillAura, 1, function(v) Settings.KillAura = v end)
createToggle("Auto Swing", combatPage, Settings.AutoSwing, 2, function(v) Settings.AutoSwing = v end)
createToggle("Visualizer", combatPage, Settings.Visualizer, 3, function(v) 
    Settings.Visualizer = v 
    VisualizerPart.Parent = v and workspace or nil
end)

-- Reach Slider
local sliderContainer = Instance.new("Frame")
sliderContainer.Size = UDim2.new(1, 0, 0, 70)
sliderContainer.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
sliderContainer.BackgroundTransparency = 0.3
sliderContainer.Parent = combatPage
sliderContainer.LayoutOrder = 4
Instance.new("UICorner", sliderContainer).CornerRadius = UDim.new(0, 10)

local ReachLabel = Instance.new("TextLabel")
ReachLabel.Size = UDim2.new(1, 0, 0, 25)
ReachLabel.Position = UDim2.new(0, 0, 0, 5)
ReachLabel.Text = "REACH: " .. Settings.Reach .. " STUDS"
ReachLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
ReachLabel.Font = Enum.Font.GothamBlack
ReachLabel.TextSize = 12
ReachLabel.BackgroundTransparency = 1
ReachLabel.Parent = sliderContainer

local SliderBG = Instance.new("Frame")
SliderBG.Size = UDim2.new(1, -40, 0, 6)
SliderBG.Position = UDim2.new(0, 20, 0, 45)
SliderBG.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
SliderBG.Parent = sliderContainer
Instance.new("UICorner", SliderBG).CornerRadius = UDim.new(0, 3)

local SliderFill = Instance.new("Frame")
SliderFill.Size = UDim2.new(Settings.Reach/50, 0, 1, 0)
SliderFill.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
SliderFill.Parent = SliderBG
Instance.new("UICorner", SliderFill).CornerRadius = UDim.new(0, 3)

local SliderBtn = Instance.new("TextButton")
SliderBtn.Size = UDim2.new(0, 18, 0, 18)
SliderBtn.Position = UDim2.new(Settings.Reach/50, -9, 0.5, -9)
SliderBtn.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
SliderBtn.Text = ""
SliderBtn.Parent = SliderBG
Instance.new("UICorner", SliderBtn).CornerRadius = UDim.new(1, 0)

local dragging = false
SliderBtn.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then dragging = true end
end)
UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then dragging = false end
end)

RunService.Heartbeat:Connect(function()
    if dragging then
        local mousePos = UserInputService:GetMouseLocation().X
        local sliderPos = SliderBG.AbsolutePosition.X
        local sliderWidth = SliderBG.AbsoluteSize.X
        local percent = math.clamp((mousePos - sliderPos) / sliderWidth, 0, 1)
        Settings.Reach = math.floor(percent * 50)
        ReachLabel.Text = "REACH: " .. Settings.Reach .. " STUDS"
        SliderFill.Size = UDim2.new(percent, 0, 1, 0)
        SliderBtn.Position = UDim2.new(percent, -9, 0.5, -9)
        SliderFill.BackgroundColor3 = UIStroke.Color
    end
end)

-- Settings Tab (Up to Down)
createToggle("Team Check", settingsPage, Settings.TeamCheck, 1, function(v) Settings.TeamCheck = v end)
createToggle("RGB Effect", settingsPage, Settings.RGB, 2, function(v) Settings.RGB = v end)
createToggle("Low GFX", settingsPage, Settings.LowGFX, 3, function(v)
    Settings.LowGFX = v
    for _, part in pairs(workspace:GetDescendants()) do
        if part:IsA("BasePart") and v then part.Material = Enum.Material.SmoothPlastic end
    end
end)
createToggle("Full Bright", settingsPage, Settings.FullBright, 4, function(v)
    Settings.FullBright = v
    if v then Lighting.Ambient = Color3.fromRGB(255, 255, 255) Lighting.OutdoorAmbient = Color3.fromRGB(255, 255, 255) Lighting.Brightness = 2
    else Lighting.Ambient = Color3.fromRGB(127, 127, 127) Lighting.OutdoorAmbient = Color3.fromRGB(127, 127, 127) Lighting.Brightness = 1 end
end)

local Credit = Instance.new("TextLabel")
Credit.Size = UDim2.new(0, 300, 0, 20)
Credit.Position = UDim2.new(1, -310, 1, -25)
Credit.Text = "POWERED BY 3KUZBLEED ON DISCORD"
Credit.TextColor3 = Color3.fromRGB(80, 80, 80)
Credit.BackgroundTransparency = 1
Credit.Font = Enum.Font.GothamBlack
Credit.TextSize = 13
Credit.Parent = MainFrame

-- Logic
local function getClosestPlayer()
    local closest, minDist = nil, Settings.Reach
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            if player.Character:FindFirstChild("Humanoid") and player.Character.Humanoid.Health > 0 then
                if not (Settings.TeamCheck and player.Team == LocalPlayer.Team) then
                    local dist = (LocalPlayer.Character.HumanoidRootPart.Position - player.Character.HumanoidRootPart.Position).Magnitude
                    if dist < minDist then minDist = dist closest = player end
                end
            end
        end
    end return closest
end

local function applyReach()
    if not LocalPlayer.Character then return end
    local tool = LocalPlayer.Character:FindFirstChildOfClass("Tool")
    if tool then
        for _, part in pairs(tool:GetDescendants()) do
            if part:IsA("BasePart") then
                if not part:FindFirstChild("OriginalSize") then
                    local v = Instance.new("Vector3Value", part) v.Name = "OriginalSize" v.Value = part.Size
                end
                if Settings.KillAura then
                    part.Size = Vector3.new(Settings.Reach, Settings.Reach, Settings.Reach)
                    part.Massless = true part.CanCollide = false
                else part.Size = part.OriginalSize.Value end
            end
        end
    end
end

RunService.RenderStepped:Connect(function()
    if Settings.AutoSwing and LocalPlayer.Character then
        local tool = LocalPlayer.Character:FindFirstChildOfClass("Tool")
        if tool then tool:Activate() VirtualUser:CaptureController() VirtualUser:ClickButton1(Vector2.new(0,0)) end
    end
    applyReach()
    if Settings.Visualizer and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        VisualizerPart.CFrame = LocalPlayer.Character.HumanoidRootPart.CFrame
        VisualizerPart.Size = Vector3.new(Settings.Reach*2, Settings.Reach*2, Settings.Reach*2)
        VisualizerPart.Color = UIStroke.Color
    end
    if Settings.KillAura then
        local target = getClosestPlayer()
        if target then LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(LocalPlayer.Character.HumanoidRootPart.Position, target.Character.HumanoidRootPart.Position) end
    end
end)
playSound(12222242)
